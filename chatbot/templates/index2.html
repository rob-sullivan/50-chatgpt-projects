<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.6.0/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa; /* Light grey background */
            color: #495057; /* Darker text for better readability */
        }
        .container {
            padding-top: 20px;
        }
        #chat {
            height: 400px;
            overflow-y: auto;
            background-color: #ffffff; /* White background for the chat area */
            border-radius: 8px; /* Rounded corners for the chat area */
            border: 1px solid #ced4da; /* Light grey border */
            padding: 15px;
            margin-bottom: 20px;
        }
        .list-group-item {
            background-color: transparent; /* No background for individual messages */
            border: none; /* No borders for individual messages */
            padding-left: 0; /* Align messages to the left */
        }
        .input-group {
            border-radius: 20px; /* Rounded corners for the input group */
            overflow: hidden; /* Hide the overflow to maintain the rounded corners */
        }
        .input-group input {
            border: 1px solid #ced4da; /* Light grey border for the input */
            box-shadow: none; /* No shadow for a flatter design */
        }
        .input-group-text {
            background-color: #007bff; /* Bootstrap primary color for the send button */
            color: #ffffff; /* White text for the send button */
            border: none; /* No border for the send button */
        }
        /* Responsive design adjustments */
        @media (max-width: 768px) {
            .input-group input, .input-group-text {
                border-radius: 0; /* Full width input and button on smaller screens */
            }
        }
    </style>
    <title>TaxTrim: Irish Tax Assistant</title>
</head>
<body>
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="mb-1">TaxTrim IRE</h2>
            <small class="text-muted">Answering all your Irish tax questions</small>
        </div>
        <div id="chat" class="list-group">
            <!-- Chat messages will be appended here -->
        </div>
        <div class="input-group mb-3">
            <input type="text" id="userInput" class="form-control" placeholder="Type your message here...">
            <div class="input-group-append">
                <span class="input-group-text" id="submit">Send</span>
            </div>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $("#submit").click(function(){
            var userInput = $("#userInput").val();
            if(userInput.trim() !== '') {
                var sanitizedInput = $("<div>").text(userInput).html(); // This is a simple way to sanitize user input
                $.get("/get?msg=" + encodeURIComponent(sanitizedInput), function(data){
                    var userMessage = $("<li class='list-group-item'><strong>You:</strong> " + sanitizedInput + "</li>");
                    var openaiMessage = $("<li class='list-group-item'><strong>OpenAI:</strong> " + data + "</li>");
                    $("#chat").append(userMessage).append(openaiMessage);
                    $("#userInput").val(''); // Clear the input field
                    $("#chat").scrollTop($("#chat")[0].scrollHeight); // Scroll to the bottom of the chat
                });
            }
        });

        // Also handle the enter key
        $("#userInput").on('keypress',function(e) {
            if(e.which == 13) {
                $("#submit").click();
            }
        });
    </script>
</body>
</html>
